{
  "test_cases": [
    {
      "id": "test_030_weekend_planner_sf",
      "type": "intra_session_context",
      "expected_tools": [
        "get_weather",
        "web_reader",
        "calculator"
      ],
      "conversation": [
        {
          "role": "user",
          "content": "Hey! I'm planning a chill weekend in San Francisco. Can you check the current weather and give me a quick vibe check?"
        },
        {
          "role": "agent_expected",
          "content": "Sure thing! Checking current conditions with the weather tool now… (Uses get_weather.) Snapshot shows typical SF microclimate—cool with a coastal breeze. Layers recommended."
        },
        {
          "role": "user",
          "content": "Nice. Would you pack a light jacket or a hoodie?"
        },
        {
          "role": "agent_expected",
          "content": "Hoodie, 100%. Evenings get nippy. Bring layers—fog likes surprises."
        },
        {
          "role": "user",
          "content": "Can you suggest 3 outdoorsy ideas that match that weather?"
        },
        {
          "role": "agent_expected",
          "content": "Absolutely: (1) Lands End trail + Sutro Baths, (2) Golden Gate Park picnic near the Conservatory of Flowers, (3) Sunset stroll at Ocean Beach—kite watching is great in that breeze."
        },
        {
          "role": "user",
          "content": "Are there any cool events or street fairs this weekend? Use the web to check."
        },
        {
          "role": "agent_expected",
          "content": "On it—opening the web reader for fresh listings… (Uses web_reader.) Found two: (a) **Halloween Hayes Valley** on Sat Oct 25 (pet parade + jazz jam, 12–4pm) — link: https://hayesvalleysf.org/calendar/ ; (b) **Bhangra & Beats Night Market** on Fri Oct 24 (music, food, film 5–10pm) — link: https://www.sfmta.com/weekend-events-october-25-26-2025 ."
        },
        {
          "role": "user",
          "content": "Yes, summarize and give me 1–2 key details for each."
        },
        {
          "role": "agent_expected",
          "content": "Street Fair: Halloween Hayes Valley — pet parade (noon–2pm) + jazz jam (2–4pm); Sat Oct 25, 12–4pm (source: https://hayesvalleysf.org/calendar/). Sunset music/film: Bhangra & Beats Night Market — live music, dance lessons + projected film, Fri Oct 24, 5–10pm (source: https://www.sfmta.com/weekend-events-october-25-26-2025)."
        },
        {
          "role": "user",
          "content": "If I do brunch ($22), rent a bike ($35), grab fair snacks (~$14), and coffee twice ($5 each), what’s my daytime total?"
        },
        {
          "role": "agent_expected",
          "content": "Crunching the numbers with the calculator… (Uses calculator.) $22 + $35 + $14 + $10 = $81 total for the day."
        },
        {
          "role": "user",
          "content": "Make it two days and add $12 for transit each day."
        },
        {
          "role": "agent_expected",
          "content": "Two-day estimate—using the calculator again… Day cost $81 × 2 = $162; transit $12 × 2 = $24; grand total $186."
        },
        {
          "role": "user",
          "content": "Any wind gotchas for sunset spots right now?"
        },
        {
          "role": "agent_expected",
          "content": "Peeking at the current snapshot via the weather tool… (Uses get_weather.) It’s breezy near the coast—bring a windbreaker or pick an inland vantage like Twin Peaks."
        },
        {
          "role": "user",
          "content": "Add a dinner budget of $28 per night and tell me the new total for both days."
        },
        {
          "role": "agent_expected",
          "content": "Calculator time: dinner $28 × 2 = $56; previous total $186 + $56 = $242 for the full weekend."
        },
        {
          "role": "user",
          "content": "Could you list the plan as a tidy, bullet-point itinerary?"
        },
        {
          "role": "agent_expected",
          "content": "You got it: • Sat: Lands End hike → Halloween Hayes Valley (12–4pm) → Ocean Beach sunset • Sun: Golden Gate Park picnic → bike loop → optional music/film at Bhangra & Beats (Fri night if you go). Budget ≈ $242; layers, hoodie, compact umbrella."
        },
        {
          "role": "user",
          "content": "Love it. Last thing: remind me to bring sunscreen and a portable charger."
        },
        {
          "role": "agent_expected",
          "content": "Noted! Packing cues: sunscreen, portable charger, hoodie, windbreaker, water bottle, and comfy shoes. Have an awesome weekend!"
        }
      ]
    },
    {
      "id": "test_031_file_search_minimal",
      "type": "intra_session_context",
      "expected_tools": [
        "file_system_search"
      ],
      "conversation": [
        {
          "role": "user",
          "content": "Can you find a file related to 'locomo' in my files?"
        },
        {
          "role": "agent_expected",
          "content": "Searching your files for that keyword… (Uses file_system_search.) Here’s a path I can return: “/User/example/documents/report.pdf”."
        },
        {
          "role": "user",
          "content": "Great—save that path so I can ask you for it later."
        },
        {
          "role": "agent_expected",
          "content": "Saved the reference to that path. Ask me for the “locomo file path” anytime."
        },
        {
          "role": "user",
          "content": "Draft a one-liner I can paste in Slack with that doc path."
        },
        {
          "role": "agent_expected",
          "content": "One-liner: “Sharing the OKR doc path for quick access: /User/example/documents/report.pdf”"
        },
        {
          "role": "user",
          "content": "Thanks!"
        },
        {
          "role": "agent_expected",
          "content": "Anytime!"
        }
      ]
    },
    {
      "id": "test_032_spanish_trip_coach",
      "type": "inter_session_context_with_preference",
      "expected_tools": [
        "translator"
      ],
      "session_setup": {
        "description": "User prefers Spanish translations with quick pronunciation cues.",
        "stored_preferences": [
          {
            "key": "preferred_translation_language",
            "value": "Spanish"
          },
          {
            "key": "teaching_tone",
            "value": "encouraging"
          }
        ]
      },
      "conversation": [
        {
          "role": "user",
          "content": "I’m practicing Spanish for a Mexico City trip. Can you translate natural phrases and give me quick pronunciation tips?"
        },
        {
          "role": "agent_expected",
          "content": "¡Claro! I’ll translate to Spanish and add simple pronunciation. Friendly, travel-focused tone."
        },
        {
          "role": "user",
          "content": "How do I say: “Hi! Two coffees to go, please.”"
        },
        {
          "role": "agent_expected",
          "content": "Spanish: «¡Hola! Dos cafés para llevar, por favor.» Pronunciation: oh-LAH, dohs kah-FEHS pah-RA yeh-BAR pohR-fah-VOR."
        },
        {
          "role": "user",
          "content": "And: “Is this seat taken?”"
        },
        {
          "role": "agent_expected",
          "content": "Spanish: «¿Está ocupado este asiento?» Pronunciation: ehs-TAH oh-koo-PAH-doh EHS-teh ah-see-EN-toh."
        },
        {
          "role": "user",
          "content": "Make it more casual, like talking to someone my age."
        },
        {
          "role": "agent_expected",
          "content": "Casual: «¿Está ocupado?» or «¿Alguien se sienta aquí?» Both sound friendly and normal."
        },
        {
          "role": "user",
          "content": "How do I politely get a server’s attention?"
        },
        {
          "role": "agent_expected",
          "content": "Use «Disculpa» (dee-SKOOL-pah) if they’re nearby, or eye contact + small wave. Avoid shouting «¡Oiga!» unless needed."
        },
        {
          "role": "user",
          "content": "Translate: “Could we split the bill?” and “Do you take cards?”"
        },
        {
          "role": "agent_expected",
          "content": "«¿Podemos dividir la cuenta?» / «¿Aceptan tarjeta?» Pronunciation: poh-DEH-mohs dee-vee-DEER lah KOOEN-tah; ah-SEP-tan tar-HEH-tah."
        },
        {
          "role": "user",
          "content": "What’s a nice way to say the food was amazing?"
        },
        {
          "role": "agent_expected",
          "content": "«¡La comida estuvo increíble!» or «¡Estuvo *deliciosa*!» Add a smile—works wonders."
        },
        {
          "role": "user",
          "content": "Correct me if I say: “¿Podemos separar la factura?”"
        },
        {
          "role": "agent_expected",
          "content": "Totally valid! «Factura» is fine; «cuenta» is more common in restaurants. Either works."
        },
        {
          "role": "user",
          "content": "Teach me one slangy but polite compliment for a street performer."
        },
        {
          "role": "agent_expected",
          "content": "«¡Qué chido tu show!» (keh CHEE-doh too show). ‘Chido’ = cool (MX). Keep tone cheerful."
        },
        {
          "role": "user",
          "content": "Last: translate “We’ll be back tomorrow!” with pronunciation."
        },
        {
          "role": "agent_expected",
          "content": "«¡Volveremos mañana!» vohl-veh-REH-mohs mahn-YAH-nah. ¡Buen viaje y pásala bien!"
        },
        {
          "role": "user",
          "content": "Thanks, coach. This was fun."
        },
        {
          "role": "agent_expected",
          "content": "¡Un placer! Ping me anytime for quick phrase fixes before you fly."
        }
      ]
    },
    {
      "id": "test_033_web_reader_ev_headlines",
      "type": "intra_session_context_grounding",
      "expected_tools": [
        "web_reader",
        "web_search"
      ],
      "conversation": [
        {
          "role": "user",
          "content": "Can you scan the web for today’s top two headlines about electric vehicle charging and summarize them with citations?"
        },
        {
          "role": "agent_expected",
          "content": "Opening web sources now… (Uses web_reader.) I’ll read two reputable articles and then summarize: (1) IONNA + Casey’s expanding 400 kW fast charging at convenience stores — https://electrek.co/2025/10/23/ionna-caseys-fast-charging-us-midwest/ ; (2) Arizona seeks bids for 34 NEVI charging hubs — https://www.electrive.com/2025/10/23/arizona-seeking-bids-for-34-ev-charging-hubs/ ."
        },
        {
          "role": "user",
          "content": "Please keep it short and tell me why each item matters."
        },
        {
          "role": "agent_expected",
          "content": "Summary: A) **IONNA × Casey’s** — private build-out of 400 kW “Rechargeries” across six states, with several sites already under construction; matters for driver convenience at familiar roadside stops (source: https://electrek.co/2025/10/23/ionna-caseys-fast-charging-us-midwest/). B) **Arizona NEVI hubs** — statewide RFP for 34 fast-charging hubs; matters for corridor coverage under public funding (source: https://www.electrive.com/2025/10/23/arizona-seeking-bids-for-34-ev-charging-hubs/)."
        },
        {
          "role": "user",
          "content": "Any notable numbers or dates mentioned?"
        },
        {
          "role": "agent_expected",
          "content": "Yes: IONNA sites target **400 kW** chargers with **eight** locations already under construction; openings begin **in 2025** (source: https://electrek.co/2025/10/23/ionna-caseys-fast-charging-us-midwest/). Arizona’s procurement is for **34 hubs** announced **Oct 23, 2025** (source: https://www.electrive.com/2025/10/23/arizona-seeking-bids-for-34-ev-charging-hubs/)."
        },
        {
          "role": "user",
          "content": "Great—also note any disagreement between sources."
        },
        {
          "role": "agent_expected",
          "content": "Different emphasis rather than disagreement: Electrek highlights **private, convenience-store** expansion with near-term openings, while electrive covers a **public NEVI** procurement that may move on longer government timelines—two routes to scaling coverage (sources above)."
        },
        {
          "role": "user",
          "content": "Give me two bullet points per article."
        },
        {
          "role": "agent_expected",
          "content": "Done. Article A — • 400 kW fast chargers at Casey’s; • eight “Rechargeries” under construction across six states (source: https://electrek.co/2025/10/23/ionna-caseys-fast-charging-us-midwest/). Article B — • Arizona RFP for 34 fast-charging hubs; • part of NEVI corridor buildout priorities (source: https://www.electrive.com/2025/10/23/arizona-seeking-bids-for-34-ev-charging-hubs/)."
        },
        {
          "role": "user",
          "content": "What should a city planner watch for next quarter?"
        },
        {
          "role": "agent_expected",
          "content": "Watch: interop standards & uptime enforcement, transformer/utility lead times, and incentive design under NEVI/state programs—these shape deployment speed and equitable access."
        },
        {
          "role": "user",
          "content": "Add the links inline after each bullet set."
        },
        {
          "role": "agent_expected",
          "content": "Added inline above after each bullet set (Electrek; electrive)."
        },
        {
          "role": "user",
          "content": "Perfect. Keep the tone neutral, not promotional."
        },
        {
          "role": "agent_expected",
          "content": "Understood. I’ll keep it factual and balanced."
        },
        {
          "role": "user",
          "content": "Ship it."
        },
        {
          "role": "agent_expected",
          "content": "All set—two concise bullet sets with links and a short why-it-matters note included."
        }
      ]
    }
  ]
}