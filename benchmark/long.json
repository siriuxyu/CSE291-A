{
  "test_cases": [
    {
      "id": "test_030_weekend_planner_sf",
      "type": "intra_session_context",
      "expected_tools": [
        "weather_tool",
        "web_reader",
        "calculator"
      ],
      "conversation": [
        {
          "role": "user",
          "content": "Hey! I'm planning a chill weekend in San Francisco. Can you check the weather for Saturday and Sunday?"
        },
        {
          "role": "agent_expected",
          "content": "Sure thing! Checking the weekend forecast with the weather tool now… (Uses weather_tool.) It looks like mild temps with coastal breeze and patchy sun both days."
        },
        {
          "role": "user",
          "content": "Nice. Would you pack a light jacket or a hoodie?"
        },
        {
          "role": "agent_expected",
          "content": "Hoodie, 100%. SF evenings can get nippy. Also bring comfy layers—fog likes surprises."
        },
        {
          "role": "user",
          "content": "Can you suggest 3 outdoorsy ideas that match that weather?"
        },
        {
          "role": "agent_expected",
          "content": "Absolutely: (1) Lands End trail + Sutro Baths, (2) Golden Gate Park picnic near the Conservatory of Flowers, (3) Sunset stroll on Ocean Beach—kite watching is great in that breeze."
        },
        {
          "role": "user",
          "content": "Are there any cool events or street fairs this weekend? Use the web to check."
        },
        {
          "role": "agent_expected",
          "content": "On it—opening the web reader for fresh listings… (Uses web_reader.) Found a local street fair and a sunset music set in the park. Want the links and quick summaries?"
        },
        {
          "role": "user",
          "content": "Yes, summarize and give me 1–2 key details for each."
        },
        {
          "role": "agent_expected",
          "content": "Street Fair: family-friendly, craft booths, live jazz; runs noon–5pm near Hayes Valley. Sunset Set: indie trio, BYO blanket, ends by 7:30pm; dogs allowed."
        },
        {
          "role": "user",
          "content": "If I do brunch ($22), rent a bike ($35), grab fair snacks (~$14), and coffee twice ($5 each), what’s my daytime total?"
        },
        {
          "role": "agent_expected",
          "content": "Crunching the numbers with the calculator… (Uses calculator.) $22 + $35 + $14 + $10 = $81 total for the day."
        },
        {
          "role": "user",
          "content": "Make it two days and add $12 for transit each day."
        },
        {
          "role": "agent_expected",
          "content": "Two-day estimate with transit—using the calculator again… Day cost $81 × 2 = $162; transit $12 × 2 = $24; grand total $186."
        },
        {
          "role": "user",
          "content": "Sweet. Any weather gotchas I should know about for sunsets?"
        },
        {
          "role": "agent_expected",
          "content": "Fog can roll in fast on the west side. Layers + windbreaker help. If you’re chasing color, try the east side of the city or climb to Twin Peaks."
        },
        {
          "role": "user",
          "content": "Can you also check if rain is likely after 8 pm either night?"
        },
        {
          "role": "agent_expected",
          "content": "Peeking at hourly outlook via weather tool… (Uses weather_tool.) Low chance after 8 pm both nights—carry a compact umbrella just in case."
        },
        {
          "role": "user",
          "content": "Add a dinner budget of $28 per night and tell me the new total for both days."
        },
        {
          "role": "agent_expected",
          "content": "Calculator time: dinner $28 × 2 = $56; previous total $186 + $56 = $242 for the full weekend."
        },
        {
          "role": "user",
          "content": "Could you list the plan as a tidy, bullet-point itinerary?"
        },
        {
          "role": "agent_expected",
          "content": "You got it: • Sat: Lands End hike → Hayes Valley Fair → Ocean Beach sunset • Sun: Golden Gate Park picnic → bike loop → sunset music set. Budget ≈ $242; layers, hoodie, compact umbrella."
        },
        {
          "role": "user",
          "content": "Love it. Last thing: remind me to bring sunscreen and a portable charger."
        },
        {
          "role": "agent_expected",
          "content": "Noted! Packing cues: sunscreen, portable charger, hoodie, windbreaker, water bottle, and comfy shoes. Have an awesome weekend!"
        }
      ]
    },
    {
      "id": "test_031_file_search_project_notes",
      "type": "intra_session_context",
      "expected_tools": [
        "file_system_search"
      ],
      "conversation": [
        {
          "role": "user",
          "content": "Can you find my document titled “Q3 OKRs – Marketing” in my files?"
        },
        {
          "role": "agent_expected",
          "content": "Searching your files for that title… (Uses file_system_search.) I see a close match named “Q3 OKRs – Marketing (final).docx”. Open it?"
        },
        {
          "role": "user",
          "content": "Open it. Who’s listed as the owner and when was it last modified?"
        },
        {
          "role": "agent_expected",
          "content": "Opening top result… (Uses file_system_search.) Owner: Taylor Kim. Last modified: Aug 28, 10:42 AM."
        },
        {
          "role": "user",
          "content": "Skim the goals section and tell me the first two key results."
        },
        {
          "role": "agent_expected",
          "content": "Scanning contents… (Uses file_system_search.) Key Results: (1) +15% qualified leads, (2) 30% increase in newsletter CTR."
        },
        {
          "role": "user",
          "content": "Is there a dependency on the new landing page revamp?"
        },
        {
          "role": "agent_expected",
          "content": "Yes. The document references the revamp as a dependency for lead-gen projections in Q3."
        },
        {
          "role": "user",
          "content": "Any owner notes or risks called out? Be concise."
        },
        {
          "role": "agent_expected",
          "content": "Notes mention bandwidth risk on design resources and potential delay in localization assets."
        },
        {
          "role": "user",
          "content": "Create a one-liner summary I can paste in Slack."
        },
        {
          "role": "agent_expected",
          "content": "One-liner: “Q3 MKTG OKRs: +15% SQLs, +30% CTR; depends on landing revamp; watch design bandwidth + localization timing.”"
        },
        {
          "role": "user",
          "content": "Great. Is there also a spreadsheet for these OKRs?"
        },
        {
          "role": "agent_expected",
          "content": "Searching for a companion sheet… (Uses file_system_search.) Found “Q3 OKRs metrics tracker.xlsx.”"
        },
        {
          "role": "user",
          "content": "Open it and confirm if the CTR baseline is 2.4%."
        },
        {
          "role": "agent_expected",
          "content": "Opening sheet… (Uses file_system_search.) Baseline CTR is 2.4% in the ‘Email’ tab."
        },
        {
          "role": "user",
          "content": "What’s the target value in that same row?"
        },
        {
          "role": "agent_expected",
          "content": "Target is 3.1% for Q3."
        },
        {
          "role": "user",
          "content": "Does it include a weekly breakdown chart?"
        },
        {
          "role": "agent_expected",
          "content": "Yes—there’s a weekly CTR line chart in the ‘Dashboard’ tab."
        },
        {
          "role": "user",
          "content": "Please save both links so I can revisit."
        },
        {
          "role": "agent_expected",
          "content": "Saved the doc and sheet references. You can ask me for “Q3 marketing OKRs links” anytime."
        },
        {
          "role": "user",
          "content": "Awesome. Draft a cheerful sign-off I can post with the update."
        },
        {
          "role": "agent_expected",
          "content": "Sign-off: “On track and caffeinated ☕—numbers trending up, watch dependencies. More soon!”"
        },
        {
          "role": "user",
          "content": "Thanks!"
        },
        {
          "role": "agent_expected",
          "content": "Anytime! Want me to look for the Q2 archive next?"
        }
      ]
    },
    {
      "id": "test_032_spanish_trip_coach",
      "type": "inter_session_context_with_preference",
      "expected_tools": [
        "translator"
      ],
      "session_setup": {
        "description": "User prefers Spanish translations with quick pronunciation cues.",
        "stored_preferences": [
          {
            "key": "preferred_translation_language",
            "value": "Spanish"
          },
          {
            "key": "teaching_tone",
            "value": "encouraging"
          }
        ]
      },
      "conversation": [
        {
          "role": "user",
          "content": "I’m practicing Spanish for a Mexico City trip. Can you translate natural phrases and give me quick pronunciation tips?"
        },
        {
          "role": "agent_expected",
          "content": "¡Claro! I’ll translate to Spanish and add simple pronunciation. Friendly, travel-focused tone."
        },
        {
          "role": "user",
          "content": "How do I say: “Hi! Two coffees to go, please.”"
        },
        {
          "role": "agent_expected",
          "content": "Spanish: «¡Hola! Dos cafés para llevar, por favor.» Pronunciation: oh-LAH, dohs kah-FEHS pah-RA yeh-BAR pohR-fah-VOR."
        },
        {
          "role": "user",
          "content": "And: “Is this seat taken?”"
        },
        {
          "role": "agent_expected",
          "content": "Spanish: «¿Está ocupado este asiento?» Pronunciation: ehs-TAH oh-koo-PAH-doh EHS-teh ah-see-EN-toh."
        },
        {
          "role": "user",
          "content": "Make it more casual, like talking to someone my age."
        },
        {
          "role": "agent_expected",
          "content": "Casual: «¿Está ocupado?» or «¿Alguien se sienta aquí?» Both sound friendly and normal."
        },
        {
          "role": "user",
          "content": "How do I politely get a server’s attention?"
        },
        {
          "role": "agent_expected",
          "content": "Use «Disculpa» (dee-SKOOL-pah) if they’re nearby, or eye contact + small wave. Avoid shouting «¡Oiga!» unless needed."
        },
        {
          "role": "user",
          "content": "Translate: “Could we split the bill?” and “Do you take cards?”"
        },
        {
          "role": "agent_expected",
          "content": "«¿Podemos dividir la cuenta?» / «¿Aceptan tarjeta?» Pronunciation: poh-DEH-mohs dee-vee-DEER lah KOOEN-tah; ah-SEP-tan tar-HEH-tah."
        },
        {
          "role": "user",
          "content": "What’s a nice way to say the food was amazing?"
        },
        {
          "role": "agent_expected",
          "content": "«¡La comida estuvo increíble!» or «¡Estuvo *deliciosa*!» Add a smile—works wonders."
        },
        {
          "role": "user",
          "content": "Correct me if I say: “¿Podemos separar la factura?”"
        },
        {
          "role": "agent_expected",
          "content": "Totally valid! «Factura» is fine; «cuenta» is more common in restaurants. Either works."
        },
        {
          "role": "user",
          "content": "Teach me one slangy but polite compliment for a street performer."
        },
        {
          "role": "agent_expected",
          "content": "«¡Qué chido tu show!» (keh CHEE-doh too show). ‘Chido’ = cool (MX). Keep tone cheerful."
        },
        {
          "role": "user",
          "content": "Last: translate “We’ll be back tomorrow!” with pronunciation."
        },
        {
          "role": "agent_expected",
          "content": "«¡Volveremos mañana!» vohl-veh-REH-mohs mahn-YAH-nah. ¡Buen viaje y pásala bien!"
        },
        {
          "role": "user",
          "content": "Thanks, coach. This was fun."
        },
        {
          "role": "agent_expected",
          "content": "¡Un placer! Ping me anytime for quick phrase fixes before you fly."
        }
      ]
    },
    {
      "id": "test_033_web_reader_ev_headlines",
      "type": "intra_session_context_grounding",
      "expected_tools": [
        "web_reader"
      ],
      "conversation": [
        {
          "role": "user",
          "content": "Can you scan the web for today’s top two headlines about electric vehicle charging and summarize them with citations?"
        },
        {
          "role": "agent_expected",
          "content": "Opening web sources now… (Uses web_reader.) I’ll read a couple of reputable articles and then summarize."
        },
        {
          "role": "user",
          "content": "Please keep it short and tell me why each item matters."
        },
        {
          "role": "agent_expected",
          "content": "Summary: Item 1 — quick adoption update + policy angle; Item 2 — new partnership expands fast-charging footprint. Both matter for driver convenience and grid planning."
        },
        {
          "role": "user",
          "content": "Any notable numbers or dates mentioned?"
        },
        {
          "role": "agent_expected",
          "content": "Yes: one piece cites new stations added ‘this quarter’; another mentions target completion ‘by year-end’. I’ll include the exact figures with the links."
        },
        {
          "role": "user",
          "content": "Great—also note any disagreement between sources."
        },
        {
          "role": "agent_expected",
          "content": "One source is bullish on pace; the other flags supply-chain friction. I’ll juxtapose both takes."
        },
        {
          "role": "user",
          "content": "Give me two bullet points per article."
        },
        {
          "role": "agent_expected",
          "content": "Done: Article A — • momentum metric • policy subsidy context. Article B — • partnership footprint • deployment timeline."
        },
        {
          "role": "user",
          "content": "What should a city planner watch for next quarter?"
        },
        {
          "role": "agent_expected",
          "content": "Watch: interop standards, transformer lead times, and peak-pricing pilots. Those shape rollout speed and user experience."
        },
        {
          "role": "user",
          "content": "Add the links inline after each bullet set."
        },
        {
          "role": "agent_expected",
          "content": "Added: will output “(source)” links right after each bullet group using web_reader citations."
        },
        {
          "role": "user",
          "content": "Perfect. Keep the tone neutral, not promotional."
        },
        {
          "role": "agent_expected",
          "content": "Understood. I’ll keep it factual and balanced."
        },
        {
          "role": "user",
          "content": "Ship it."
        },
        {
          "role": "agent_expected",
          "content": "All set—summary with two concise bullet sets and citations ready to share."
        }
      ]
    }
  ]
}